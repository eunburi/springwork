package di_p.main;

import org.springframework.context.support.AbstractApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Student_main {

    public static void main(String[] args) {
        AbstractApplicationContext context = new ClassPathXmlApplicationContext("di_xml/student.xml");

        // ArrayList arr1 = context.getBean("arr1", ArrayList.class);
        // System.out.println(arr1); // 학생이름 출력

        // ArrayList arr2 = context.getBean("arr2", ArrayList.class);
        // System.out.println(arr2); // 학생이름 출력

        Student stu1 = context.getBean("stu1", Student.class);
        Student stu2 = context.getBean("stu2", Student.class);
        Student stu3 = context.getBean("stu3", Student.class);
        Student stu4 = context.getBean("stu4", Student.class);
        Student stu5 = context.getBean("stu5", Student.class);

        Student[] students = { stu1, stu2, stu3, stu4, stu5 };

        // 등수를 매기고 점수를 배열로 저장
        for (Student student : students) {
            int[] scores = student.getArr1();
            int total = 0;
            for (int score : scores) {
                total += score;
            }
            student.setJum(total);

            double average = (double) total / scores.length;
            student.setAvg(average);
        }

        // 등수를 기준으로 정렬
        for (int i = 0; i < students.length - 1; i++) {
            for (int j = i + 1; j < students.length; j++) {
                if (students[i].getJum() < students[j].getJum()) {
                    Student temp = students[i];
                    students[i] = students[j];
                    students[j] = temp;
                }
            }
        }

        // 등수와 학생 정보 출력
        for (int rank = 1; rank <= students.length; rank++) {
            Student student = students[rank - 1];
            System.out.println("등수: " + rank + ", 이름: " + student.getName() +
                    ", 총점: " + student.getJum() + ", 평균: " + student.getAvg());
        }

        context.close();
    }
}